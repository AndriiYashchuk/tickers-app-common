name: Setup environment
description: Setup environment for Node.js project

inputs:
  npm-token:
    description: NPM token
    required: true
  github-workspace:
    description: Github workspace
    required: true

runs:
  using: composite
  steps:

    # Install Node.js
    - uses: actions/setup-node@v2
      with:
        node-version: 16
        registry-url: https://registry.npmjs.org/:_authToken=${{ inputs.npm-token  }}

    # Create .npmrc
    - uses: bikutadesu/create-npmrc@v1.0.0
      with:
        org_name: tickers-app
        auth_token: ${{ inputs.npm-token  }}
        always_auth: true

    # Install your dependencies
    - run: npm ci
      shell: bash
